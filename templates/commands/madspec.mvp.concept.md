---
description: MVP - Этап 0 - Создание концепции проекта - определение целевой аудитории, ее "боли" и основных функций системы (проекта)
handoffs: 
  - label: UI/UX-дизайн
    agent: madspec.mvp.design.md
    prompt: Проработай графический пользовательский интерфейс на основе концепции реализуемой системы
scripts:
  sh: scripts/bash/get-branch.sh
  ps: scripts/powershell/get-branch.ps1
---

## Пользовательский ввод

```text
$ARGUMENTS
```

Ты **ОБЯЗАН** учитывать пользовательский ввод перед продолжением (если он не пустой).

## Правила диалога (обязательно)

- **Задавай вопросы строго по одному**: в каждом твоем сообщении должен быть **ровно 1 вопрос**, который требует ответа.
- **Не выдавай список вопросов заранее** (никаких длинных анкет/чек-листов вопросов за раз).
- Если нужен выбор, задай **один вопрос** и предложи **не больше 3–5 вариантов** (или попроси свободный ответ).
- **Дожидайся ответа** и только затем задавай следующий вопрос.
- Если ответ неполный — задай **один уточняющий вопрос**, а не несколько сразу.

## Описание

Этот этап является отправной точкой для **MVP (Minimum Viable Product)** проекта в рамках **MADSpec (MADSpec Framework)**. Здесь определяется **ЧТО** необходимо создать и **ПОЧЕМУ**, без погружения в технические детали.

**Режим MVP**: Эта команда предназначена для разработки нового проекта с нуля. Все артефакты сохраняются в `.madspec/<BRANCH>/`, где `<BRANCH>` - имя текущей ветки разработки.

## Цель этапа

Создать четкое понимание:
- Кто является целевой аудиторией
- Какую "боль" целевой аудитории (ЦА) решает разрабатываемая система (проект)
- Какие основные функции должны быть реализованы
- Какие платформы (веб, мобилки, десктоп, телеграм-бот и т.д.) должны поддерживаться разрабатываемой системой

## Рабочий процесс

### ⚠️ КРИТИЧЕСКИ ВАЖНО: Оркестрация субагентов и агентских навыков

**ОБЯЗАТЕЛЬНО ВЫПОЛНИ ЭТОТ ШАГ ПЕРВЫМ ПЕРЕД ВСЕМИ ОСТАЛЬНЫМИ ДЕЙСТВИЯМИ:**

1. **Загрузи агенсткий навык (agent skills из из директории .x/skills, где x - название используемой среды разработки. Например - cursor, opencode и т.д.) оркестрации субагентов (`subagents_orchestrator`)**, который отвечает за распределения частей выполняемой команды по специализированным субагентам. 

**ВНИМАНИЕ** - `subagents_orchestrator` **НЕ СУБАГЕНТ (subagent), А НАВЫК!!!!! ЕГО НЕЛЬЗЯ ПЫТАТЬСЯ ЗАПУСКАТЬ КАК СУБАГЕНТА!!! ЕГО НАДО ИСПОЛЬЗОВАТЬ ДЛЯ ТОГО ЧТОБЫ ОПРЕДЕЛИТЬ МОЖНО ЛИ ПОРУЧИТЬ ЗАДАЧУ ВЫПОЛНИТЬ ПОМОЩНИКАМ - ДРУГИМ СУБАГЕНТАМ ИЛИ НЕТ, А ЕСЛИ МОЖНО, ТО КАКИМ И КАК (ПАРАЛЛЕЛЬНО/ПОСЛЕДОВАТЕЛЬНО)**

2. **Проанализируй текущую задачу и примени к ней навык `subagents_orchestrator`**:
   - Навык проанализирует задачу и вернет структурированный JSON-ответ с рекомендациями:
     - Каких субагентов использовать
     - Режим выполнения (parallel/sequential)
     - Обоснование выбора
     - Если навык вернул одного субагента, проанализируй можно ли запустить несколько таких параллельно для ускорения работы
   - **ВАЖНО**: Если навык вернул `status: "no_agents"` или список субагентов пуст, переходи к обычному выполнению задачи без использования субагентов

3. **При запуске субагентов**:
  - Если для запускаемого субагента имеется подходящий навык, **ОБЯЗАТЕЛЬНО** передай в промпте, отправляемом на вход субагента, команду по его загрузке
  - **КРИТИЧЕСКИ ВАЖНО**: При вызове инструментов, отвечающих за запуск субагентов, **ВСЕГДА** передавай следующие параметры (если они поддерживаются):
     - `description` - краткое описание задачи
     - `prompt` - детальные инструкции для субагента
     - Тип субагента

4. **Fallback поведение**:
   - Если субагенты недоступны или навык не может быть использован, продолжи обычное выполнение задачи

⚠️⚠️⚠️ **ЕСЛИ ЗАГРУЖАЕШЬ НАВЫК ОРКЕСТРАЦИИ — ИСПОЛЬЗУЙ ЕГО РЕКОМЕНДАЦИИ, А НЕ ИГНОРИРУЙ**

---

0. **Определение текущей ветки**:
   - **ВАЖНО**: Перед началом работы определи текущую ветку, выполнив `{SCRIPT}` из корня проекта
   - Скрипт возвращает имя ветки через stdout
   - Используй результат выполнения скрипта (имя ветки) для формирования путей к артефактам
   - Все пути к артефактам должны быть в формате `.madspec/<BRANCH>/...`, где `<BRANCH>` - это имя ветки, полученное из скрипта
   - Если ни скрипт, ни файл недоступны, используй значение по умолчанию `main`
   - Сохрани имя ветки для использования в дальнейших шагах

1. **Инициализация GIT репозитория и создание ветки для разработки**:
   - Проверь, инициализирован ли GIT репозиторий (выполни `git status` или проверь наличие `.git/`)
   - Если репозиторий не инициализирован:
     - Выполни `git init`
     - Создай максимально полный `.gitignore` (если его нет), обязательно исключив следующие категории файлов:
       
       **Конфигурационные файлы с секретами** (критически важно!):
       - `.env`, `.env.local`, `.env.production`, `.env.development`, `.env.test`, `.env.*.local`
       - `*.env`, `*.secret`, `*.key`, `*.pem`, `*.p12`, `*.pfx`, `*.cer`, `*.crt`
       - `config/secrets.json`, `secrets.yaml`, `secrets.yml`, `credentials.json`, `credentials.yaml`
       - `*.token`, `*.password`, `*.passwd`, `*.auth`
       - Любые файлы с API ключами, токенами, паролями
       
       **Зависимости Node.js**:
       - `node_modules/`, `npm-debug.log*`, `yarn-error.log*`, `.pnpm-debug.log*`
       - `.yarn/`, `.pnp.*`, `.yarn-integrity`, `yarn.lock` (опционально)
       - `.npm/`, `.node_repl_history`, `package-lock.json` (опционально)
       
       **Зависимости Python**:
       - `venv/`, `.venv/`, `env/`, `ENV/`, `env.bak/`, `venv.bak/`
       - `__pycache__/`, `*.py[cod]`, `*$py.class`, `*.so`, `.Python`
       - `pip-log.txt`, `pip-delete-this-directory.txt`, `.pytest_cache/`
       - `*.egg-info/`, `dist/`, `build/`, `eggs/`, `wheels/`
       
       **Зависимости Java**:
       - `target/`, `*.class`, `*.jar`, `*.war`, `*.ear`, `*.nar`
       - `.gradle/`, `.mvn/`, `mvnw`, `mvnw.cmd`, `.settings/`
       - `*.iml`, `*.ipr`, `*.iws`, `*.classpath`, `.project`
       
       **Зависимости Go**:
       - `vendor/`, `*.exe`, `*.exe~`, `*.dll`, `*.test`, `*.out`
       - `go.work`, `go.work.sum`
       
       **Зависимости Rust**:
       - `target/`, `Cargo.lock` (опционально)
       
       **Зависимости Dart/Flutter**:
       - `.dart_tool/`, `.flutter-plugins`, `.flutter-plugins-dependencies`
       - `.packages`, `pubspec.lock` (опционально), `.pub-cache/`
       - `build/`, `.flutter-plugins-dependencies`
       
       **Зависимости PHP**:
       - `vendor/`, `composer.lock` (опционально)
       
       **Зависимости C#/.NET**:
       - `bin/`, `obj/`, `*.user`, `*.suo`, `*.cache`, `*.dll`
       - `.vs/`, `.vscode/`, `*.sln.docstates`
       
       **Временные и системные файлы**:
       - `.DS_Store`, `Thumbs.db`, `ehthumbs.db`, `Desktop.ini`
       - `*.log`, `*.tmp`, `*.temp`, `*.swp`, `*.swo`, `*~`, `*.bak`
       - `.DS_Store?`, `._*`, `.Spotlight-V100`, `.Trashes`
       
       **IDE и редакторы**:
       - `.idea/`, `.vscode/` (кроме настроек проекта), `.vs/`
       - `*.sublime-*`, `.fleet/`, `.cursor/`, `.history/`
       - `*.code-workspace`, `.vscode-test/`
       
       **Артефакты сборки**:
       - `dist/`, `build/`, `out/`, `.next/`, `.nuxt/`, `.output/`
       - `*.o`, `*.a`, `*.lib`, `*.so`, `*.dylib`, `*.dll`
       
       **Базы данных**:
       - `*.db`, `*.sqlite`, `*.sqlite3`, `*.db-shm`, `*.db-wal`
       
       **Кэш и временные данные**:
       - `.cache/`, `.temp/`, `.tmp/`, `.parcel-cache/`
       - `.turbo/`, `.next/`, `.nuxt/`, `.vuepress/dist/`
       
       **Операционные системы**:
       - `.DS_Store`, `Thumbs.db`, `desktop.ini`, `$RECYCLE.BIN/`
       - `.fseventsd/`, `.Spotlight-V100/`, `.TemporaryItems/`
       
     - **ВАЖНО**: `.gitignore` должен быть создан ДО первого коммита, чтобы секреты не попали в репозиторий
     - Добавь все файлы: `git add .`
     - Убедись, что `.gitignore` работает: проверь `git status` и убедись, что конфигурационные файлы с секретами не отображаются
     - Создай первый коммит: `git commit -m "feat: добавлена концепция проекта"`
   - **Создание ветки для разработки MVP**:
     - Создай новую ветку для разработки MVP (например, `mvp-initial` или `develop`)
     - Переключись на эту ветку: `git checkout -b <branch-name>`
     - **ВАЖНО**: Все артефакты MVP будут сохраняться в `.madspec/<branch-name>/`
   - Если репозиторий уже инициализирован:
     - Проверь наличие `.gitignore` и при необходимости обнови его (добавь правила для конфигурационных файлов с секретами и других категорий, если их нет)
     - Если текущая ветка - `main` или `master`, создай новую ветку для разработки: `git checkout -b <branch-name>`
     - Добавь новые файлы: `git add .`
     - Создай коммит: `git commit -m "feat: добавлена концепция проекта"`
   - **КРИТИЧЕСКИ ВАЖНО**: Никогда не коммить файлы с секретами (API ключи, пароли, токены). Если секреты уже попали в репозиторий, их нужно немедленно изменить, так как история GIT сохраняет все изменения

2. **Создание структуры концепции**:
   - Загрузи `.madspec/templates/concept-template.md`. Этот файл представляет собой ШАБЛОН, содержащий токены-заполнители в квадратных скобках (например, [НАЗВАНИЕ_ПРОЕКТА], [БОЛЬ_ЦА] и т.д.). Твоя задача — (а) собрать/определить конкретные значения, (б) точно заполнить шаблон и (в) распространить любые изменения на зависимые артефакты.
   - **ВАЖНО**: Если шаблон `.madspec/templates/concept-template.md` не найден, **ЭКСТРЕННО ПРЕКРАТИ** выполнение команды и сообщи об ошибке.
   - Заполни разделы на основе ввода пользователя

3. **Сбор значений для заполнителей**:
   - Если пользовательский ввод (диалог) содержит значение, используй его.
   - В противном случае сделай вывод на основе существующего контекста репозитория (README, документации, предыдущей версии концепции, если они имеются в проекте).
   - Для дат принятия решений: ДАТА_РАТИФИКАЦИИ — исходная дата принятия (если неизвестна, спроси или отметь как TODO), ДАТА_ПОСЛЕДНЕГО_ИЗМЕНЕНИЯ — сегодняшняя дата, если были внесены изменения, в противном случае оставь предыдущее значение.

4. **Анализ и приоритизация**:
   - Проанализируй собранные данные и определи приоритеты заполнения разделов концепции
   - Определи, какие разделы требуют дополнительной информации от пользователя

5. **Заполнение разделов концепции**:

   a. **Целевая аудитория**:
      - Основные пользователи
      - Их потребности и ожидания
      - Сценарии использования

   b. **Решаемая "боль" целевой аудитории**:
      - Какая боль/проблема решается?
      - Кто испытывает эту боль?
      - Как проект решает эту проблему?

   c. **Основные функции разрабатываемого проекта**:
      - Проработка набора функций для разрабатываемой системы
      - Приоритизация функций (P1, P2, P3)

   d. **Ограничения и предположения**:
      - Технические ограничения (если известны)
      - Предположения о пользователях/окружении

6. **Валидация концепции**:
   
   **ВАЖНО**: Перед сохранением файла выполни полную валидацию концепции по следующему чек-листу:
   
   - [ ] **Целевая аудитория детально описана**
     - Указаны основные группы пользователей
     - Описаны их потребности и ожидания
     - Приведены сценарии использования
     - **Если не выполнено**: попроси детализировать описание аудитории и как они будут взаимодействовать с разрабатываемой системой

   - [ ] **Четко определена решаемая "боль" ЦА**
     - Решаемая "боль" целевой аудитории описана конкретно, не абстрактно
     - Указано, кто испытывает проблему
     - Проблема актуальна и стоит решения
     - **Если не выполнено**: попроси уточнить какую боль у целевой аудитории призван решить разрабатываемый программный продукт

   - [ ] **Основные функции разрабатываемого проекта приоритизированы (P1, P2, P3)**
     - Все функции имеют приоритет и полное описание
     - P1 - те функции, которые критичны для решения "боли" ЦА и должны быть реализованы в первую очередь
     - P2 и P3 функции, реализуемые во вторую и третью очередь 
     - **Если не выполнено**, то попроси приоритизировать функции из предложенного тобой списка вариантов
   
   - [ ] **Ограничения и предположения задокументированы**
     - Указаны технические ограничения (если известны)
     - Задокументированы предположения о пользователях/окружении
     - **Если не выполнено**: попроси указать ограничения и предположения
   
   - [ ] **Все разделы концепции заполнены**
     - Целевая аудитория определена
     - Определена решаемая "боль" ЦА
     - Перечислены и приоритизированы функции разрабатываемого программного продукта
     - Ограничения задокументированы
     - **Если не выполнено**: заполни недостающие разделы
   
   - [ ] **Функции соответствуют решаемой "боли" ЦА**
     - Каждая описанная функция решает часть "боли" ЦА
     - Нет функций, не связанных с проблемой
     - **Если не выполнено**: пересмотри соответствие функций проблеме
   
   **Если валидация не пройдена:**
   - Укажи конкретные пункты, которые не выполнены
   - **ОБЯЗАТЕЛЬНО** задай уточняющие вопросы или предложи конкретные исправления
   - **НЕ ПЕРЕХОДИ** к следующему этапу до прохождения валидации
   
   **Если валидация пройдена:**
   - Подтверди успешную валидацию
   - Переходи к следующему этапу

7. **Обновление project-context.md**:
   - Создай/обнови `.madspec/<BRANCH>/project-context.md` из шаблона `.madspec/templates/project-context-template.md`
   - Заполни:
     - Название проекта
     - Краткое описание проекта
     - Текущий этап: "concept"
     - Статус этапа концепции: "Завершен"

8. **Сохранение файлов**:
   - Сохрани `.madspec/<BRANCH>/concept.md` (где `<BRANCH>` - имя ветки, определенное в шаге 0)
   - Сохрани `.madspec/<BRANCH>/project-context.md` (только навигация)

## Правила

- **НЕ** упоминай конкретные технологии на этом этапе
- **НЕ** детализируй техническую реализацию
- **ФОКУС** на пользовательской ценности и бизнес-логике
- Используй простой язык, понятный нетехническим людям

## Выходные артефакты

- `.gitignore` - файл исключений для GIT репозитория
- `.madspec/<BRANCH>/concept.md` - полная концепция проекта (где `<BRANCH>` - имя текущей ветки)
- `.madspec/<BRANCH>/project-context.md` - обновленный контекст проекта

## Следующий этап

После завершения этого этапа необходимо перейти к `/madspec.mvp.design` для работы над видением графического пользовательского интерфейса на основе концепции реализуемой системы
