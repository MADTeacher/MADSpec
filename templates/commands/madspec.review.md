---
description: Этап 6 - Review и рефлексия - анализ созданных артефактов, выявление улучшений и рефлексия над процессом
scripts:
  sh: scripts/bash/get-branch.sh
  ps: scripts/powershell/get-branch.ps1
---

## Пользовательский ввод

```text
$ARGUMENTS
```

Ты **ОБЯЗАН** учитывать пользовательский ввод перед продолжением (если он не пустой).

## Правила диалога со студентом (обязательно)

- **Задавай вопросы строго по одному**: в каждом твоем сообщении должен быть **ровно 1 вопрос**, который требует ответа студента.
- **Не выдавай список вопросов заранее** (никаких длинных анкет/чек-листов вопросов за раз).
- Если нужен выбор, задай **один вопрос** и предложи **не больше 3–5 вариантов** (или попроси свободный ответ).
- **Дожидайся ответа** и только затем задавай следующий вопрос.
- Если ответ неполный — задай **один уточняющий вопрос**, а не несколько сразу.

## Описание

Этот этап **MADSpec (MADSpec Framework)** предназначен для анализа созданных артефактов, выявления сильных и слабых сторон реализации, и проведения рефлексии над процессом разработки. Это критически важный этап для закрепления знаний и понимания лучших практик.

## Предварительные условия

- Должен быть завершен этап реализации (`/madspec.implement`) или хотя бы несколько шагов
- Должны существовать основные артефакты проекта (где `<BRANCH>` определяется через скрипт):
  - `.madspec/<BRANCH>/concept.md`
  - `.madspec/<BRANCH>/ui-design.md` (или `.madspec/<BRANCH>/ui-prototype/`)
  - `.madspec/<BRANCH>/tech-stack.md`
  - `.madspec/<BRANCH>/architecture.md`
  - Реализованный код проекта
- Если артефакты отсутствуют, предложи выполнить предыдущие этапы

## Цель этапа

Провести комплексный анализ проекта:
- Оценить качество созданных артефактов
- Выявить сильные и слабые стороны реализации
- Сравнить с лучшими практиками индустрии
- Предложить конкретные улучшения
- Провести рефлексию над процессом разработки
- Закрепить полученные знания

## Рабочий процесс

**Оркестрация субагентов**: Перед началом выполнения задач попытайся использовать навык оркестрации субагентов (`subagents_orchestrator`) для распределения частей задачи по специализированным субагентам. Если субагенты недоступны или навык не может быть использован, продолжи обычное выполнение задачи.

0. **Определение текущей ветки**:
   - **ВАЖНО**: Перед началом работы определи текущую ветку, выполнив `{SCRIPT}` из корня проекта
   - Скрипт возвращает имя ветки через stdout
   - Используй результат выполнения скрипта (имя ветки) для формирования путей к артефактам
   - Все пути к артефактам должны быть в формате `.madspec/<BRANCH>/...`, где `<BRANCH>` - это имя ветки, полученное из скрипта
   - Если ни скрипт, ни файл недоступны, используй значение по умолчанию `main`
   - Сохрани имя ветки для использования в дальнейших шагах

1. **Загрузка контекста**:
   - Прочитай все созданные артефакты:
     - `.madspec/<BRANCH>/concept.md` (где `<BRANCH>` - имя ветки, определенное в шаге 0)
     - `.madspec/<BRANCH>/ui-design.md`
     - `.madspec/<BRANCH>/tech-stack.md`
     - `.madspec/<BRANCH>/architecture.md`
     - `.madspec/<BRANCH>/implementation-plan.md` (если существует)
     - `.madspec/<BRANCH>/memory/progress.json` (если существует)
   - Проанализируй структуру проекта и реализованный код
   - Изучи историю коммитов (если доступна)

1. **Анализ концепции**:
   - Проверь, решена ли заявленная проблема
   - Оцени соответствие реализации концепции
   - Выяви расхождения между концепцией и реализацией

2. **Анализ архитектуры и кода**:
   - Проверь соответствие архитектуры выбранному стеку
   - Оцени качество кода:
     - Соответствие принципам SOLID
     - Читаемость и поддерживаемость
     - Обработка ошибок
     - Тестовое покрытие
   - Проверь соответствие структуры проекта архитектурным решениям
   - Выяви антипаттерны и технический долг
   
   **Глубокий анализ качества кода:**
   - На основе изучения кодовой базы и имеющихся артефактов проекта проведи детальный анализ:
     - Соответствие принципам SOLID (Single Responsibility, Open/Closed, Liskov Substitution, Interface Segregation, Dependency Inversion)
     - Читаемость и поддерживаемость кода (именование, структура, комментарии)
     - Обработку ошибок (try-catch блоки, валидация входных данных, обработка edge cases)
     - Тестовое покрытие (наличие тестов, их качество и полнота)
     - Антипаттерны и технический долг (дублирование кода, сложные зависимости, устаревшие подходы)
   - Используй результаты анализа для заполнения раздела "Анализ архитектуры и кода" в отчете

3. **Анализ дизайна и UX**:
   - Сравни реализацию с HTML-прототипами
   - Оцени соответствие дизайна выбранным платформам
   - Проверь пользовательские потоки
   - Выяви проблемы UX (если применимо)

4. **Анализ технологических решений**:
   - Оцени правильность выбора технологий
   - Проверь, использованы ли технологии эффективно
   - Выяви неиспользованные возможности стека
   - Проверь соответствие лучшим практикам для выбранных технологий

5. **Сравнение с лучшими практиками**:
   - Сравни решения с эталонными проектами
   - Выяви отклонения от индустриальных стандартов
   - Предложи улучшения на основе best practices
   - Укажи на паттерны, которые можно применить

6. **Создание отчета с рекомендациями**:
   - Загрузи шаблон `.madspec/templates/review-template.md`
   - Заполни разделы:
     - **Сильные стороны**: Что сделано хорошо
     - **Области для улучшения**: Что можно улучшить
     - **Конкретные рекомендации**: Пошаговые предложения
     - **Рефакторинг**: Что нужно переделать и почему
     - **Дополнительные возможности**: Что можно добавить
   - Сохрани в `.madspec/<BRANCH>/review.md`

7. **Создание плана улучшений**:
    - На основе анализа создай приоритизированный список улучшений
    - Раздели на:
      - Критичные (нужно исправить)
      - Важные (желательно исправить)
      - Опциональные (можно улучшить позже)
    - Сохрани в `.madspec/<BRANCH>/improvements.md`

8. **Обновление контекста**:
    - Обнови `.madspec/project-context.md`:
      - Установи текущий этап: "review"
      - Обнови статус этапа review: "Завершен"
      - Добавь ссылку на список улучшений `.madspec/<BRANCH>/improvements.md`
      - Добавь ссылку на отчет `.madspec/<BRANCH>/review.md`

9. **Отчет**:
    - Выведи пути к созданным файлам
    - Покажи основные выводы
    - Предложи следующие шаги (рефакторинг, улучшения, или завершение проекта)

## Правила

- **БУДЬ КОНСТРУКТИВНЫМ** - критикуй решения, а не студента
- **ПРЕДЛАГАЙ РЕШЕНИЯ** - не только указывай на проблемы, но и предлагай исправления
- **ОБЪЯСНЯЙ ПРИЧИНЫ** - почему что-то хорошо или плохо
- **СРАВНИВАЙ С ПРАКТИКАМИ** - используй примеры из индустрии

## Выходные артефакты

- `.madspec/<BRANCH>/review.md` - детальный отчет с анализом и рекомендациями (где `<BRANCH>` - имя текущей ветки)
- `.madspec/<BRANCH>/improvements.md` - приоритизированный список улучшений
- `.madspec/project-context.md` - обновленный контекст (только навигация и ссылки)

## Следующие шаги

После завершения review студент может:
- Выполнить рефакторинг на основе рекомендаций
- Реализовать улучшения из списка
- Завершить проект и подготовить презентацию
- Начать новый проект, применив полученный опыт

---

**Важно**: Этот этап не является обязательным для завершения проекта, но крайне рекомендуется для закрепления знаний и улучшения качества кода.

