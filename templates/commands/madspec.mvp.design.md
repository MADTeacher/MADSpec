---
description: MVP - Этап 1 - Создание дизайна пользовательского интерфейса на основе концепции проекта
handoffs: 
  - label: Выбрать технологии
    agent: madspec.mvp.tech
    prompt: Выбери технологический стек на основе дизайна
scripts:
  sh: scripts/bash/get-branch.sh
  ps: scripts/powershell/get-branch.ps1
---

## Пользовательский ввод

```text
$ARGUMENTS
```

Ты **ОБЯЗАН** учитывать пользовательский ввод перед продолжением (если он не пустой).

## Правила диалога (обязательно)

- **Задавай вопросы строго по одному**: в каждом твоем сообщении должен быть **ровно 1 вопрос**, который требует ответа.
- **Не выдавай список вопросов заранее** (никаких длинных анкет/чек-листов вопросов за раз).
- Если нужен выбор, задай **один вопрос** и предложи **не больше 3–5 вариантов** (или попроси свободный ответ).
- **Дожидайся ответа** и только затем задавай следующий вопрос.
- Если ответ неполный — задай **один уточняющий вопрос**, а не несколько сразу.

## Описание

На этом этапе **MADSpec (MADSpec Framework)** создается визуальный дизайн пользовательского интерфейса на основе концепции проекта для **MVP (Minimum Viable Product)**. Это критически важный этап, так как дизайн определяет:

**Режим MVP**: Эта команда предназначена для разработки нового проекта с нуля. Все артефакты сохраняются в `.madspec/<BRANCH>/`, где `<BRANCH>` - имя текущей ветки разработки.
- Какие эндпоинты API действительно нужны
- Какая структура данных требуется
- Какие пользовательские потоки должны быть реализованы

## Предварительные условия

- Должен существовать `.madspec/<BRANCH>/concept.md` и `.madspec/<BRANCH>/project-context.md` с описанной концепцией проекта (где `<BRANCH>` определяется через скрипт)
- Если файлы отсутствуют, предложи сначала выполнить `/madspec.mvp.concept`

## Цель этапа

Создать визуальное представление интерфейса, которое:
- Решает проблемы, определенные в концепции
- **Охватывает ВСЕ функции всех приоритетов (P1, P2, P3)**, которые должны быть реализованы в разрабатываемой системе
- Определяет пользовательские потоки для всех функций
- Утвердить в ходе диалога финальное видение UI/UX перед следующей стадией

**КРИТИЧНО**: Дизайн должен быть разработан для ВСЕХ приоритетов функций (P1, P2, P3), а не только для P1!

## Рабочий процесс

### ⚠️ КРИТИЧЕСКИ ВАЖНО: Оркестрация субагентов и агентских навыков

**ОБЯЗАТЕЛЬНО ВЫПОЛНИ ЭТОТ ШАГ ПЕРВЫМ ПЕРЕД ВСЕМИ ОСТАЛЬНЫМИ ДЕЙСТВИЯМИ:**

1. **Загрузи агенсткий навык (agent skills из из директории .x/skills, где x - название используемой среды разработки. Например - cursor, opencode и т.д.) оркестрации субагентов (`subagents_orchestrator`)**, который отвечает за распределения частей выполняемой команды по специализированным субагентам. 

**ВНИМАНИЕ** - `subagents_orchestrator` **НЕ СУБАГЕНТ (subagent), А НАВЫК!!!!! ЕГО НЕЛЬЗЯ ПЫТАТЬСЯ ЗАПУСКАТЬ КАК СУБАГЕНТА!!! ЕГО НАДО ИСПОЛЬЗОВАТЬ ДЛЯ ТОГО ЧТОБЫ ОПРЕДЕЛИТЬ МОЖНО ЛИ ПОРУЧИТЬ ЗАДАЧУ ВЫПОЛНИТЬ ПОМОЩНИКАМ - ДРУГИМ СУБАГЕНТАМ ИЛИ НЕТ, А ЕСЛИ МОЖНО, ТО КАКИМ И КАК (ПАРАЛЛЕЛЬНО/ПОСЛЕДОВАТЕЛЬНО)**

2. **Проанализируй текущую задачу и примени к ней навык `subagents_orchestrator`**:
   - Навык проанализирует задачу и вернет структурированный JSON-ответ с рекомендациями:
     - Каких субагентов использовать
     - Режим выполнения (parallel/sequential)
     - Обоснование выбора
     - Если навык вернул одного субагента, проанализируй можно ли запустить несколько таких параллельно для ускорения работы
   - **ВАЖНО**: Если навык вернул `status: "no_agents"` или список субагентов пуст, переходи к обычному выполнению задачи без использования субагентов

3. **При запуске субагентов**:
  - Если для запускаемого субагента имеется подходящий навык, **ОБЯЗАТЕЛЬНО** передай в промпте, отправляемом на вход субагента, команду по его загрузке
  - **КРИТИЧЕСКИ ВАЖНО**: При вызове инструментов, отвечающих за запуск субагентов, **ВСЕГДА** передавай следующие параметры (если они поддерживаются):
     - `description` - краткое описание задачи
     - `prompt` - детальные инструкции для субагента
     - Тип субагента

4. **Fallback поведение**:
   - Если субагенты недоступны или навык не может быть использован, продолжи обычное выполнение задачи

⚠️⚠️⚠️ **ЕСЛИ ЗАГРУЖАЕШЬ НАВЫК ОРКЕСТРАЦИИ — ИСПОЛЬЗУЙ ЕГО РЕКОМЕНДАЦИИ, А НЕ ИГНОРИРУЙ**

---

0. **Определение текущей ветки**:
   - **ВАЖНО**: Перед началом работы определи текущую ветку, выполнив `{SCRIPT}` из корня проекта
   - Скрипт возвращает имя ветки через stdout
   - Используй результат выполнения скрипта (имя ветки) для формирования путей к артефактам
   - Все пути к артефактам должны быть в формате `.madspec/<BRANCH>/...`, где `<BRANCH>` - это имя ветки, полученное из скрипта
   - Если ни скрипт, ни файл недоступны, используй значение по умолчанию `main`
   - Сохрани имя ветки для использования в дальнейших шагах

1. **Загрузка контекста**:
   - Прочитай `.madspec/<BRANCH>/concept.md` (где `<BRANCH>` - имя ветки, определенное в шаге 0)
   - Прочитай `.madspec/<BRANCH>/project-context.md`
   - Извлеките **ВСЕ функции всех приоритетов (P1, P2, P3)**, которые должны быть в разрабатываемой системе и пользовательские сценарии
   - **ВАЖНО**: Не ограничивайся только функциями P1 - дизайн должен покрывать все приоритеты!

1. **Создание структуры дизайна**:
   - Загрузи `.madspec/templates/ui-design-template.md`. Этот файл представляет собой ШАБЛОН, содержащий токены-заполнители в квадратных скобках (например, [ВЕРСИЯ_ДИЗАЙНА] и т.д.). Твоя задача — (а) собрать/определить конкретные значения, (б) точно заполнить шаблон и (в) распространить любые изменения на зависимые артефакты.
   - Определи основные экраны/страницы на основе **ВСЕХ функций всех приоритетов (P1, P2, P3)** из концепции
   - **КРИТИЧНО**: Убедись, что для каждой функции P1, P2 и P3 определен соответствующий экран или виджет

2. **Проектирование интерфейса**:

   a. **Определение экранов**:
      - Определи необходимые экраны (или виджеты/модули) для **КАЖДОЙ функции всех приоритетов (P1, P2, P3)**, которая должна быть реализована в разрабатываемом проекте
      - **ВАЖНО**: Не пропускай функции P2 и P3 - все функции должны иметь соответствующие экраны или виджеты
      - Сгруппируй связанные функции на одном экране, где это возможно
      - Определи навигацию между экранами

    b. **Создание HTML/CSS прототипов**:
       - **Шаблоны для прототипов**:
         - Используй шаблон `.madspec/templates/html-prototype-template.html` для создания отдельных экранов. **ВАЖНО**: Это голый каркас без предопределенных компонентов. Создай компоненты интерфейса СПЕЦИФИЧНЫЕ для домена проекта на основе concept.md. Добавь необходимые стили в секцию `<style>` каждого экрана.
         - Используй шаблон `.madspec/templates/index-prototype-template.html` для создания главной страницы с навигацией.
       - **Группировка экранов по функциональным зонам**:
         - На основе `.madspec/<BRANCH>/concept.md` определи функциональные зоны приложения
         - Сгруппируй экраны по этим зонам в index.html
         - Для каждой зоны создай отдельную секцию `<section class="zone-section">`
       - **Индикация приоритетов P1/P2/P3**:
         - Для каждого экрана укажи приоритет через CSS-класс и метку:
           - P1 (Критично): `<span class="priority-badge p1">● P1</span>` — зеленый круг
           - P2 (Важно): `<span class="priority-badge p2">◐ P2</span>` — желтый круг
           - P3 (Опционально): `<span class="priority-badge p3">○ P3</span>` — серый круг
       - **Создание экранов**:
         - Для каждого основного экрана создай HTML файл со СПЕЦИФИЧНЫМИ для домена компонентами
         - Добавь в каждый экран необходимые стили в секции `<style>`
         - **НЕ ИСПОЛЬЗУЙ типовые компоненты** (карточки, формы, списки) без адаптации под домен
         - **ИЗУЧИ concept.md** и создай UI, который РЕШАЕТ ПРОБЛЕМЫ конкретного домена
         - Если выбрана Mobile платформа → используй мобильные паттерны (bottom navigation, touch-friendly элементы, размеры для мобильных экранов)
         - Если выбрана Desktop платформа → используй десктопные паттерны (меню, клавиатурные шорткаты, большие экраны)
         - Если выбрана Web платформа → используй адаптивный дизайн (responsive design)
         - Если выбрано несколько платформ → создай адаптивные прототипы или отдельные версии
         - Используй семантический HTML и чистый CSS (без внешних зависимостей, если возможно)
         - Прототип должен быть функциональным визуально, но не требует реальной логики (можно использовать заглушки данных)

   c. **Пользовательские потоки**:
      - Опиши основные сценарии использования
      - Определи последовательность экранов для каждого сценария
      - Выяви точки взаимодействия с системой
      - Убедись, что навигация между экранами работает в прототипе

   d. **Определение данных**:
      - Какие данные отображаются на каждом экране
      - Какие данные вводятся пользователем
      - Какие данные передаются между экранами
      - Используй заглушки данных в прототипе для демонстрации
  
   e. **Создание локального сервера**
      - Проверь, какие уже установлены языки программирования (go, python) или платформы (node.js), которые можно использовать для создания локального сервера
      - Предоставь пользователю выбрать, что использовать для создания локального сервера
      - Создай проект локального сервера в `.madspec/<BRANCH>/ui-prototype/` , который будет возвращать `index.html` (например, http://localhost:8000/index.html)
      - Создай в директории `.madspec/<BRANCH>/ui-prototype/` файл `README.md` с описанием того, как запустить локальный сервер и открыть главную страницу

3. **Валидация дизайна**:
   
   **ВАЖНО**: Перед утверждением дизайна выполни полную валидацию по следующему чек-листу:
   
   - [ ] **Все функции разрабатываемой системы покрыты экранами**
     - Для **КАЖДОЙ функции всех приоритетов (P1, P2, P3)** из концепции есть соответствующий экран или виджет
     - **КРИТИЧНО**: Проверь, что функции P2 и P3 также имеют экраны или виджеты, а не только P1
     - Все P1, P2 и P3 функции имеют экраны или виджеты, расположенные на экранах
     - Если не выполнено: создай недостающие экраны для всех приоритетов
   
   - [ ] **Пользовательские потоки логичны и полны**
     - Потоки описывают полные сценарии использования
     - Навигация между экранами логична
     - Нет "тупиковых" экранов без продолжения
     - Если не выполнено: пересмотри пользовательские потоки
   
   - [ ] **Дизайн соответствует выбранным платформам**
     - Используются паттерны UI для выбранных платформ
     - Учтены ограничения платформ (размеры экранов, способы взаимодействия)
     - **Если не выполнено**: адаптируй дизайн под платформы
   
   - [ ] **Прототип открывается в браузере без ошибок**
     - HTML файлы валидны (нет синтаксических ошибок)
     - CSS корректно применяется
     - Нет ошибок в консоли браузера
     - **Если не выполнено**: исправь ошибки в HTML/CSS
   
   - [ ] **Навигация между экранами работает**
     - Все ссылки между экранами работают
     - Навигация интуитивна
     - Пользователь может вернуться на предыдущий экран
     - **Если не выполнено**: исправь навигацию
   
   - [ ] **Дизайн решает проблемы из концепции**
     - Каждый экран решает часть проблемы
     - Пользователь может выполнить все необходимые действия
     - **Если не выполнено**: пересмотри соответствие дизайна концепции
   
   - [ ] **Определены данные для каждого экрана**
     - Понятно, какие данные отображаются
     - Понятно, какие данные вводятся
     - **Если не выполнено**: определи данные для каждого экрана

   **Если валидация не пройдена:**
   - Укажи конкретные пункты, которые не выполнены
   - Предложи конкретные исправления
   - **НЕ ПЕРЕХОДИ** к следующему этапу до прохождения валидации
   
   **Если валидация пройдена:**
   - Подтверди успешную валидацию
   - Переходи к шагу 4

4. **Обновление project-context.md**:
   - Обнови `.madspec/<BRANCH>/project-context.md`:
     - Установи текущий этап: "design"
     - Обнови статус этапа дизайна: "Завершен"

5. **Создание файлов дизайна**:
   - Создай директорию `.madspec/<BRANCH>/ui-prototype/` для HTML/CSS прототипов
   - Используй шаблоны `.madspec/templates/html-prototype-template.html` и `.madspec/templates/index-prototype-template.html` как основу для прототипов
   - Для каждого экрана создай отдельный HTML файл с встроенным CSS на основе `html-prototype-template.html`
   - Создай главный файл `index.html` на основе `index-prototype-template.html`, который служит точкой входа и содержит навигацию между экранами
   - Сохрани описание дизайна в `.madspec/<BRANCH>/ui-design.md`
   - Обнови `.madspec/<BRANCH>/project-context.md` (только навигацию)

6. **Требование для утверждения дизайна**:
   - **КРИТИЧНО**: Попроси просмотреть и утвердить дизайн
   - Укажи путь к главному файлу прототипа: `.madspec/<BRANCH>/ui-prototype/index.html`
   - Инструкция: "Запусти локальный сервер (опиши, как это сделать) и открой файл `.madspec/ui-prototype/index.html` в браузере (можно использовать встроенный браузер Cursor: Ctrl+Shift+P → 'Simple Browser: Show')"
   - Спроси: "Дизайн готов. Просмотри прототип в браузере и подтверди, что он соответствует твоим ожиданиям. (да/нет/изменить)"
   - Если "изменить" или "нет", попроси указать, что нужно изменить, и обнови соответствующие HTML/CSS файлы
   - **НЕ ПЕРЕХОДИ** к следующему этапу без утверждения

7. **Отчет**:
   - Выведи путь к главному файлу прототипа: `.madspec/<BRANCH>/ui-prototype/index.html`
   - Выведи список всех созданных HTML файлов
   - Укажи инструкцию по открытию в браузере
   - Укажи, что дизайн требует утверждения
   - После утверждения предложи перейти к выбору технологий

## Правила
- **НЕ ИСПОЛЬЗУЙ предопределенные компоненты** из шаблонов (карточки, формы, списки, кнопки). Шаблоны — это голый каркас. **Создавай компоненты, специфичные для домена проекта** на основе `.madspec/concept.md`.
- **ИЗУЧИ `.madspec/<BRANCH>/concept.md`** перед созданием UI. Пойми, какие проблемы решает проект и для кого. Создай интерфейс, который решает эти проблемы естественным образом.
- **ДОБАВЛЯЙ необходимые стили** в каждый генерируемый экран в секции `<style>`. Не ограничивайся базовыми стилями из шаблона.
- **ГРУППИРУЙ экраны по функциональным зонам** из concept.md. Каждая зона — отдельная секция в index.html.
- **УКАЗЫВАЙ приоритеты** для каждого экрана с помощью индикаторов:
  - P1 (Критично): `● P1` (зеленый)
  - P2 (Важно): `◐ P2` (желтый)
  - P3 (Опционально): `○ P3` (серый)
- **НИКОГДА** не используй типовую эстетику, созданную искусственным интеллектом: часто используемые семейства шрифтов (Inter, Roboto, Arial, системные шрифты), шаблонные цветовые схемы (особенно фиолетовые градиенты на белом фоне), предсказуемые макеты и шаблоны компонентов, шаблонный дизайн без индивидуального подхода. **ПОМНИ**: Ты способен на выдающуюся творческую работу. Не сдерживайся и покажи, что можно создать, если мыслить нестандартно и полностью посвятить себя воплощению уникальной идеи.
- **СОЗДАВАЙ HTML/CSS прототипы** для всех экранов, покрывающих **ВСЕ функции всех приоритетов (P1, P2, P3)**
- Используй семантический HTML и чистый CSS
- Прототип должен быть визуально функциональным, но не требует реальной логики (заглушки данных допустимы)
- Навигация между экранами должна работать (можно использовать простые ссылки)

## Выходные артефакты

**Примечание**: Для создания прототипов используй шаблоны:
- `.madspec/templates/html-prototype-template.html` - шаблон для отдельных экранов (хранится в корне `.madspec/`)
- `.madspec/templates/index-prototype-template.html` - шаблон для главной страницы с навигацией (хранится в корне `.madspec/`)

- `.madspec/<BRANCH>/ui-prototype/` - директория с HTML/CSS прототипами (где `<BRANCH>` - имя текущей ветки)
  - `index.html` - главный файл с навигацией между экранами
  - `[screen-name].html` - HTML файлы для каждого экрана
  - `styles.css` или встроенные стили в каждом HTML файле
  - `[local_server_host]` - директория с локальным сервером или пару файлов
- `.madspec/<BRANCH>/ui-design.md` - описание дизайна интерфейса (ссылки на прототипы, описание потоков)
- `.madspec/<BRANCH>/project-context.md` - обновленный контекст проекта

## Следующий этап

После утверждения дизайна перейди к `/madspec.mvp.tech` для выбора технологического стека.

